{"ast":null,"code":"export default {\n  name: 'StockInForm',\n  data() {\n    return {\n      stockInForm: {\n        transaction_no: '',\n        transaction_type: 1,\n        // Default to 采购入库\n        transaction_date: new Date(),\n        reference_no: '',\n        warehouse_id: null,\n        transaction_remark: '',\n        created_by: 'admin',\n        // TODO: Get from current user\n        details: []\n      }\n    };\n  },\n  created() {\n    this.addItem();\n  },\n  methods: {\n    addItem() {\n      this.stockInForm.details.push({\n        item_type: 2,\n        // Default to component\n        item_id: null,\n        location_id: null,\n        // Or use location_code_manual if not using select\n        location_code_manual: '',\n        quantity: 1,\n        batch_no: ''\n      });\n    },\n    removeItem(index) {\n      this.stockInForm.details.splice(index, 1);\n    },\n    submitForm() {\n      // TODO: Validate and API call\n      console.log('Submitting Stock In form:', this.stockInForm);\n      this.$message.success('入库单创建成功!');\n      // this.goBack(); // Or navigate to transaction list/detail\n    },\n    goBack() {\n      // TODO: Navigate to previous page or transaction list\n      this.$router.push({\n        name: 'TransactionList'\n      });\n    }\n  }\n};","map":{"version":3,"names":["name","data","stockInForm","transaction_no","transaction_type","transaction_date","Date","reference_no","warehouse_id","transaction_remark","created_by","details","created","addItem","methods","push","item_type","item_id","location_id","location_code_manual","quantity","batch_no","removeItem","index","splice","submitForm","console","log","$message","success","goBack","$router"],"sources":["src/views/inventory/StockInForm.vue"],"sourcesContent":["<template>\n  <div class=\"stock-in-form-container\">\n    <h2>创建入库单</h2>\n    <el-form :model=\"stockInForm\" ref=\"stockInFormRef\" label-width=\"120px\">\n      <el-form-item label=\"事务编号\" prop=\"transaction_no\">\n        <el-input v-model=\"stockInForm.transaction_no\" placeholder=\"系统自动生成或手动输入\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"事务类型\" prop=\"transaction_type\">\n         <el-select v-model=\"stockInForm.transaction_type\" placeholder=\"选择入库类型\">\n          <el-option label=\"采购入库\" :value=\"1\"></el-option>\n          <el-option label=\"成品入库\" :value=\"4\"></el-option>\n          <!-- Other types like return etc. -->\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"事务日期\" prop=\"transaction_date\">\n        <el-date-picker v-model=\"stockInForm.transaction_date\" type=\"datetime\" placeholder=\"选择日期时间\"></el-date-picker>\n      </el-form-item>\n      <el-form-item label=\"参考单号\" prop=\"reference_no\">\n        <el-input v-model=\"stockInForm.reference_no\" placeholder=\"采购单号/生产单号等\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"仓库\" prop=\"warehouse_id\">\n        <!-- TODO: Select for warehouses -->\n        <el-select v-model=\"stockInForm.warehouse_id\" placeholder=\"选择仓库\">\n            <el-option label=\"主仓库\" value=\"1\"></el-option>\n        </el-select>\n      </el-form-item>\n\n      <h3>入库明细</h3>\n      <el-table :data=\"stockInForm.details\" border style=\"margin-bottom: 15px;\">\n        <el-table-column label=\"物料类型\">\n            <template slot-scope=\"scope\">\n                <el-select v-model=\"scope.row.item_type\" placeholder=\"类型\">\n                    <el-option label=\"产品\" :value=\"1\"></el-option>\n                    <el-option label=\"配件\" :value=\"2\"></el-option>\n                </el-select>\n            </template>\n        </el-table-column>\n        <el-table-column label=\"物料编码/名称\">\n            <template slot-scope=\"scope\">\n                <!-- TODO: Searchable select for items based on item_type -->\n                <el-select v-model=\"scope.row.item_id\" placeholder=\"选择物料\">\n                    <el-option v-if=\"scope.row.item_type === 1\" label=\"示例产品A (P001)\" value=\"1\"></el-option>\n                    <el-option v-if=\"scope.row.item_type === 2\" label=\"示例配件X (C001)\" value=\"101\"></el-option>\n                </el-select>\n            </template>\n        </el-table-column>\n        <el-table-column label=\"库位\">\n            <template slot-scope=\"scope\">\n                <!-- TODO: Select for locations based on warehouse -->\n                <el-input v-model=\"scope.row.location_code_manual\" placeholder=\"库位编码\"></el-input> \n                <!-- <el-select v-model=\"scope.row.location_id\" placeholder=\"选择库位\"><el-option label=\"A-01\" value=\"1\"></el-option></el-select> -->\n            </template>\n        </el-table-column>\n        <el-table-column label=\"数量\">\n            <template slot-scope=\"scope\">\n                <el-input-number v-model=\"scope.row.quantity\" :min=\"0.001\" :precision=\"3\"></el-input-number>\n            </template>\n        </el-table-column>\n        <el-table-column label=\"批次号\">\n            <template slot-scope=\"scope\">\n                <el-input v-model=\"scope.row.batch_no\"></el-input>\n            </template>\n        </el-table-column>\n        <el-table-column label=\"操作\">\n            <template slot-scope=\"scope\">\n                <el-button size=\"mini\" type=\"danger\" @click=\"removeItem(scope.$index)\">移除</el-button>\n            </template>\n        </el-table-column>\n      </el-table>\n      <el-button @click=\"addItem\">添加入库项</el-button>\n\n      <el-form-item label=\"备注\" prop=\"transaction_remark\" style=\"margin-top: 15px;\">\n        <el-input type=\"textarea\" v-model=\"stockInForm.transaction_remark\"></el-input>\n      </el-form-item>\n      <el-form-item>\n        <el-button type=\"primary\" @click=\"submitForm\">提交入库单</el-button>\n        <el-button @click=\"goBack\">取消</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'StockInForm',\n  data() {\n    return {\n      stockInForm: {\n        transaction_no: '',\n        transaction_type: 1, // Default to 采购入库\n        transaction_date: new Date(),\n        reference_no: '',\n        warehouse_id: null,\n        transaction_remark: '',\n        created_by: 'admin', // TODO: Get from current user\n        details: []\n      }\n    };\n  },\n  created(){\n      this.addItem();\n  },\n  methods: {\n    addItem() {\n      this.stockInForm.details.push({\n        item_type: 2, // Default to component\n        item_id: null,\n        location_id: null, // Or use location_code_manual if not using select\n        location_code_manual: '',\n        quantity: 1,\n        batch_no: ''\n      });\n    },\n    removeItem(index) {\n      this.stockInForm.details.splice(index, 1);\n    },\n    submitForm() {\n      // TODO: Validate and API call\n      console.log('Submitting Stock In form:', this.stockInForm);\n      this.$message.success('入库单创建成功!');\n      // this.goBack(); // Or navigate to transaction list/detail\n    },\n    goBack() {\n      // TODO: Navigate to previous page or transaction list\n      this.$router.push({ name: 'TransactionList' }); \n    }\n  }\n};\n</script>\n\n<style scoped>\n.stock-in-form-container {\n  padding: 20px;\n}\n</style> "],"mappings":"AAmFA;EACAA,IAAA;EACAC,KAAA;IACA;MACAC,WAAA;QACAC,cAAA;QACAC,gBAAA;QAAA;QACAC,gBAAA,MAAAC,IAAA;QACAC,YAAA;QACAC,YAAA;QACAC,kBAAA;QACAC,UAAA;QAAA;QACAC,OAAA;MACA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,OAAA;EACA;EACAC,OAAA;IACAD,QAAA;MACA,KAAAX,WAAA,CAAAS,OAAA,CAAAI,IAAA;QACAC,SAAA;QAAA;QACAC,OAAA;QACAC,WAAA;QAAA;QACAC,oBAAA;QACAC,QAAA;QACAC,QAAA;MACA;IACA;IACAC,WAAAC,KAAA;MACA,KAAArB,WAAA,CAAAS,OAAA,CAAAa,MAAA,CAAAD,KAAA;IACA;IACAE,WAAA;MACA;MACAC,OAAA,CAAAC,GAAA,mCAAAzB,WAAA;MACA,KAAA0B,QAAA,CAAAC,OAAA;MACA;IACA;IACAC,OAAA;MACA;MACA,KAAAC,OAAA,CAAAhB,IAAA;QAAAf,IAAA;MAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}