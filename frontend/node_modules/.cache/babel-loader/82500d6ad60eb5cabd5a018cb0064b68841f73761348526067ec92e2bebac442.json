{"ast":null,"code":"export default {\n  name: 'AdjustmentForm',\n  data() {\n    return {\n      adjustmentForm: {\n        transaction_no: '',\n        transaction_type: 5,\n        // Default to 库存调整\n        transaction_date: new Date(),\n        warehouse_id: null,\n        transaction_remark: '',\n        created_by: 'admin',\n        // TODO: Get from current user\n        details: []\n      }\n    };\n  },\n  created() {\n    this.addItem();\n  },\n  methods: {\n    addItem() {\n      this.adjustmentForm.details.push({\n        item_type: 2,\n        item_id: null,\n        location_code_manual: '',\n        quantity: 0,\n        batch_no: '',\n        detail_remark: ''\n      });\n    },\n    removeItem(index) {\n      this.adjustmentForm.details.splice(index, 1);\n    },\n    submitForm() {\n      // TODO: Validate and API call\n      console.log('Submitting Adjustment form:', this.adjustmentForm);\n      this.$message.success('库存调整单创建成功!');\n      // this.goBack();\n    },\n    goBack() {\n      this.$router.push({\n        name: 'TransactionList'\n      });\n    }\n  }\n};","map":{"version":3,"names":["name","data","adjustmentForm","transaction_no","transaction_type","transaction_date","Date","warehouse_id","transaction_remark","created_by","details","created","addItem","methods","push","item_type","item_id","location_code_manual","quantity","batch_no","detail_remark","removeItem","index","splice","submitForm","console","log","$message","success","goBack","$router"],"sources":["src/views/inventory/AdjustmentForm.vue"],"sourcesContent":["<template>\n  <div class=\"adjustment-form-container\">\n    <h2>创建库存调整单</h2>\n    <el-form :model=\"adjustmentForm\" ref=\"adjustmentFormRef\" label-width=\"120px\">\n      <el-form-item label=\"事务编号\" prop=\"transaction_no\">\n        <el-input v-model=\"adjustmentForm.transaction_no\" placeholder=\"系统自动生成或手动输入\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"事务类型\" prop=\"transaction_type\">\n         <el-select v-model=\"adjustmentForm.transaction_type\" placeholder=\"选择调整类型\">\n          <el-option label=\"库存调整\" :value=\"5\"></el-option>\n          <el-option label=\"盘点调整\" :value=\"6\"></el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"事务日期\" prop=\"transaction_date\">\n        <el-date-picker v-model=\"adjustmentForm.transaction_date\" type=\"datetime\" placeholder=\"选择日期时间\"></el-date-picker>\n      </el-form-item>\n      <el-form-item label=\"仓库\" prop=\"warehouse_id\">\n        <el-select v-model=\"adjustmentForm.warehouse_id\" placeholder=\"选择仓库\">\n            <el-option label=\"主仓库\" value=\"1\"></el-option>\n        </el-select>\n      </el-form-item>\n\n      <h3>调整明细</h3>\n      <el-table :data=\"adjustmentForm.details\" border style=\"margin-bottom: 15px;\">\n        <el-table-column label=\"物料类型\">\n            <template slot-scope=\"scope\">\n                <el-select v-model=\"scope.row.item_type\" placeholder=\"类型\">\n                    <el-option label=\"产品\" :value=\"1\"></el-option>\n                    <el-option label=\"配件\" :value=\"2\"></el-option>\n                </el-select>\n            </template>\n        </el-table-column>\n        <el-table-column label=\"物料编码/名称\">\n            <template slot-scope=\"scope\">\n                <!-- TODO: Searchable select for items -->\n                <el-select v-model=\"scope.row.item_id\" placeholder=\"选择物料\">\n                     <el-option v-if=\"scope.row.item_type === 1\" label=\"示例产品A (P001)\" value=\"1\"></el-option>\n                    <el-option v-if=\"scope.row.item_type === 2\" label=\"示例配件X (C001)\" value=\"101\"></el-option>\n                </el-select>\n            </template>\n        </el-table-column>\n        <el-table-column label=\"库位\">\n             <template slot-scope=\"scope\">\n                <el-input v-model=\"scope.row.location_code_manual\" placeholder=\"库位编码\"></el-input>\n            </template>\n        </el-table-column>\n        <el-table-column label=\"调整数量\">\n            <template slot-scope=\"scope\">\n                <el-input-number v-model=\"scope.row.quantity\" :precision=\"3\" placeholder=\"正为增,负为减\"></el-input-number>\n            </template>\n        </el-table-column>\n        <el-table-column label=\"批次号\">\n            <template slot-scope=\"scope\">\n                <el-input v-model=\"scope.row.batch_no\"></el-input>\n            </template>\n        </el-table-column>\n        <el-table-column label=\"调整原因\">\n            <template slot-scope=\"scope\">\n                <el-input v-model=\"scope.row.detail_remark\" placeholder=\"如盘盈、盘亏、损坏等\"></el-input>\n            </template>\n        </el-table-column>\n        <el-table-column label=\"操作\">\n            <template slot-scope=\"scope\">\n                <el-button size=\"mini\" type=\"danger\" @click=\"removeItem(scope.$index)\">移除</el-button>\n            </template>\n        </el-table-column>\n      </el-table>\n      <el-button @click=\"addItem\">添加调整项</el-button>\n\n      <el-form-item label=\"总体备注\" prop=\"transaction_remark\" style=\"margin-top: 15px;\">\n        <el-input type=\"textarea\" v-model=\"adjustmentForm.transaction_remark\"></el-input>\n      </el-form-item>\n      <el-form-item>\n        <el-button type=\"primary\" @click=\"submitForm\">提交调整单</el-button>\n        <el-button @click=\"goBack\">取消</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'AdjustmentForm',\n  data() {\n    return {\n      adjustmentForm: {\n        transaction_no: '',\n        transaction_type: 5, // Default to 库存调整\n        transaction_date: new Date(),\n        warehouse_id: null,\n        transaction_remark: '',\n        created_by: 'admin', // TODO: Get from current user\n        details: []\n      }\n    };\n  },\n  created(){\n      this.addItem();\n  },\n  methods: {\n    addItem() {\n      this.adjustmentForm.details.push({\n        item_type: 2,\n        item_id: null,\n        location_code_manual: '',\n        quantity: 0,\n        batch_no: '',\n        detail_remark: ''\n      });\n    },\n    removeItem(index) {\n      this.adjustmentForm.details.splice(index, 1);\n    },\n    submitForm() {\n      // TODO: Validate and API call\n      console.log('Submitting Adjustment form:', this.adjustmentForm);\n      this.$message.success('库存调整单创建成功!');\n      // this.goBack();\n    },\n    goBack() {\n      this.$router.push({ name: 'TransactionList' });\n    }\n  }\n};\n</script>\n\n<style scoped>\n.adjustment-form-container {\n  padding: 20px;\n}\n</style> "],"mappings":"AAiFA;EACAA,IAAA;EACAC,KAAA;IACA;MACAC,cAAA;QACAC,cAAA;QACAC,gBAAA;QAAA;QACAC,gBAAA,MAAAC,IAAA;QACAC,YAAA;QACAC,kBAAA;QACAC,UAAA;QAAA;QACAC,OAAA;MACA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,OAAA;EACA;EACAC,OAAA;IACAD,QAAA;MACA,KAAAV,cAAA,CAAAQ,OAAA,CAAAI,IAAA;QACAC,SAAA;QACAC,OAAA;QACAC,oBAAA;QACAC,QAAA;QACAC,QAAA;QACAC,aAAA;MACA;IACA;IACAC,WAAAC,KAAA;MACA,KAAApB,cAAA,CAAAQ,OAAA,CAAAa,MAAA,CAAAD,KAAA;IACA;IACAE,WAAA;MACA;MACAC,OAAA,CAAAC,GAAA,qCAAAxB,cAAA;MACA,KAAAyB,QAAA,CAAAC,OAAA;MACA;IACA;IACAC,OAAA;MACA,KAAAC,OAAA,CAAAhB,IAAA;QAAAd,IAAA;MAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}