{"ast":null,"code":"import Vue from 'vue';\nimport Vuex from 'vuex';\nimport axios from 'axios';\nVue.use(Vuex);\nexport default new Vuex.Store({\n  state: {\n    token: localStorage.getItem('token') || '',\n    user: JSON.parse(localStorage.getItem('user')) || null,\n    loading: false\n  },\n  getters: {\n    isAuthenticated: state => !!state.token,\n    currentUser: state => state.user\n  },\n  mutations: {\n    SET_TOKEN(state, token) {\n      state.token = token;\n    },\n    SET_USER(state, user) {\n      state.user = user;\n    },\n    SET_LOADING(state, loading) {\n      state.loading = loading;\n    },\n    CLEAR_AUTH(state) {\n      state.token = '';\n      state.user = null;\n    }\n  },\n  actions: {\n    // 登录\n    async login({\n      commit\n    }, credentials) {\n      commit('SET_LOADING', true);\n      try {\n        const response = await axios.post('/auth/login', credentials);\n        const {\n          token,\n          user\n        } = response.data.data;\n        localStorage.setItem('token', token);\n        localStorage.setItem('user', JSON.stringify(user));\n        commit('SET_TOKEN', token);\n        commit('SET_USER', user);\n        return response;\n      } catch (error) {\n        throw error;\n      } finally {\n        commit('SET_LOADING', false);\n      }\n    },\n    // 登出\n    logout({\n      commit\n    }) {\n      localStorage.removeItem('token');\n      localStorage.removeItem('user');\n      commit('CLEAR_AUTH');\n    },\n    // 获取用户信息\n    async fetchUserInfo({\n      commit\n    }) {\n      commit('SET_LOADING', true);\n      try {\n        const response = await axios.get('/auth/me');\n        const user = response.data.data;\n        localStorage.setItem('user', JSON.stringify(user));\n        commit('SET_USER', user);\n        return user;\n      } catch (error) {\n        throw error;\n      } finally {\n        commit('SET_LOADING', false);\n      }\n    }\n  }\n});","map":{"version":3,"names":["Vue","Vuex","axios","use","Store","state","token","localStorage","getItem","user","JSON","parse","loading","getters","isAuthenticated","currentUser","mutations","SET_TOKEN","SET_USER","SET_LOADING","CLEAR_AUTH","actions","login","commit","credentials","response","post","data","setItem","stringify","error","logout","removeItem","fetchUserInfo","get"],"sources":["/Users/gongqian/Downloads/xianglong-erp/frontend/src/store/index.js"],"sourcesContent":["import Vue from 'vue'\nimport Vuex from 'vuex'\nimport axios from 'axios'\n\nVue.use(Vuex)\n\nexport default new Vuex.Store({\n  state: {\n    token: localStorage.getItem('token') || '',\n    user: JSON.parse(localStorage.getItem('user')) || null,\n    loading: false\n  },\n  getters: {\n    isAuthenticated: state => !!state.token,\n    currentUser: state => state.user\n  },\n  mutations: {\n    SET_TOKEN(state, token) {\n      state.token = token\n    },\n    SET_USER(state, user) {\n      state.user = user\n    },\n    SET_LOADING(state, loading) {\n      state.loading = loading\n    },\n    CLEAR_AUTH(state) {\n      state.token = ''\n      state.user = null\n    }\n  },\n  actions: {\n    // 登录\n    async login({ commit }, credentials) {\n      commit('SET_LOADING', true)\n      try {\n        const response = await axios.post('/auth/login', credentials)\n        const { token, user } = response.data.data\n        \n        localStorage.setItem('token', token)\n        localStorage.setItem('user', JSON.stringify(user))\n        \n        commit('SET_TOKEN', token)\n        commit('SET_USER', user)\n        \n        return response\n      } catch (error) {\n        throw error\n      } finally {\n        commit('SET_LOADING', false)\n      }\n    },\n    \n    // 登出\n    logout({ commit }) {\n      localStorage.removeItem('token')\n      localStorage.removeItem('user')\n      commit('CLEAR_AUTH')\n    },\n    \n    // 获取用户信息\n    async fetchUserInfo({ commit }) {\n      commit('SET_LOADING', true)\n      try {\n        const response = await axios.get('/auth/me')\n        const user = response.data.data\n        \n        localStorage.setItem('user', JSON.stringify(user))\n        commit('SET_USER', user)\n        \n        return user\n      } catch (error) {\n        throw error\n      } finally {\n        commit('SET_LOADING', false)\n      }\n    }\n  }\n})\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}