{"version":3,"file":"js/291.51065a3e.js","mappings":"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","sources":["webpack://xianglong-erp-frontend/./src/views/purchase/PurchaseOrderForm.vue","webpack://xianglong-erp-frontend/src/views/purchase/PurchaseOrderForm.vue","webpack://xianglong-erp-frontend/./src/views/purchase/PurchaseOrderForm.vue?e6ab","webpack://xianglong-erp-frontend/./src/views/purchase/PurchaseOrderForm.vue?fedd"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"purchase-order-form-container\"},[_c('h2',[_vm._v(_vm._s(_vm.isEditMode ? '编辑采购订单' : '新增采购订单'))]),_c('el-form',{ref:\"orderFormRef\",attrs:{\"model\":_vm.orderForm,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"订单编号\",\"prop\":\"order_no\"}},[_c('el-input',{attrs:{\"disabled\":_vm.isEditMode},model:{value:(_vm.orderForm.order_no),callback:function ($$v) {_vm.$set(_vm.orderForm, \"order_no\", $$v)},expression:\"orderForm.order_no\"}})],1),_c('el-form-item',{attrs:{\"label\":\"供应商\",\"prop\":\"supplier_id\"}},[_c('el-select',{attrs:{\"placeholder\":\"选择供应商\"},model:{value:(_vm.orderForm.supplier_id),callback:function ($$v) {_vm.$set(_vm.orderForm, \"supplier_id\", $$v)},expression:\"orderForm.supplier_id\"}},[_c('el-option',{attrs:{\"label\":\"供应商A\",\"value\":\"1\"}}),_c('el-option',{attrs:{\"label\":\"供应商B\",\"value\":\"2\"}})],1)],1),_c('el-form-item',{attrs:{\"label\":\"订单日期\",\"prop\":\"order_date\"}},[_c('el-date-picker',{attrs:{\"type\":\"date\",\"placeholder\":\"选择日期\"},model:{value:(_vm.orderForm.order_date),callback:function ($$v) {_vm.$set(_vm.orderForm, \"order_date\", $$v)},expression:\"orderForm.order_date\"}})],1),_c('el-form-item',{attrs:{\"label\":\"预计到货日\",\"prop\":\"expected_date\"}},[_c('el-date-picker',{attrs:{\"type\":\"date\",\"placeholder\":\"选择日期\"},model:{value:(_vm.orderForm.expected_date),callback:function ($$v) {_vm.$set(_vm.orderForm, \"expected_date\", $$v)},expression:\"orderForm.expected_date\"}})],1),_c('h3',[_vm._v(\"订单明细 (配件)\")]),_c('el-table',{staticStyle:{\"margin-bottom\":\"15px\"},attrs:{\"data\":_vm.orderForm.items,\"border\":\"\"}},[_c('el-table-column',{attrs:{\"label\":\"配件\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-select',{attrs:{\"placeholder\":\"选择配件\"},model:{value:(scope.row.component_id),callback:function ($$v) {_vm.$set(scope.row, \"component_id\", $$v)},expression:\"scope.row.component_id\"}},[_c('el-option',{attrs:{\"label\":\"示例配件X\",\"value\":\"1\"}}),_c('el-option',{attrs:{\"label\":\"示例配件Y\",\"value\":\"2\"}})],1)]}}])}),_c('el-table-column',{attrs:{\"label\":\"数量\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-input-number',{attrs:{\"min\":1},model:{value:(scope.row.quantity),callback:function ($$v) {_vm.$set(scope.row, \"quantity\", $$v)},expression:\"scope.row.quantity\"}})]}}])}),_c('el-table-column',{attrs:{\"label\":\"单价\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-input-number',{attrs:{\"min\":0,\"precision\":2},model:{value:(scope.row.unit_price),callback:function ($$v) {_vm.$set(scope.row, \"unit_price\", $$v)},expression:\"scope.row.unit_price\"}})]}}])}),_c('el-table-column',{attrs:{\"label\":\"金额\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\" \"+_vm._s(_vm._f(\"toFixed\")((scope.row.quantity * scope.row.unit_price) || 0,2))+\" \")]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"danger\"},on:{\"click\":function($event){return _vm.removeItem(scope.$index)}}},[_vm._v(\"移除\")])]}}])})],1),_c('el-button',{on:{\"click\":_vm.addItem}},[_vm._v(\"添加配件\")]),_c('el-form-item',{staticStyle:{\"margin-top\":\"15px\"},attrs:{\"label\":\"总金额\"}},[_c('el-input',{attrs:{\"readonly\":\"\"},model:{value:(_vm.totalAmountDisplay),callback:function ($$v) {_vm.totalAmountDisplay=$$v},expression:\"totalAmountDisplay\"}})],1),_c('el-form-item',{attrs:{\"label\":\"备注\",\"prop\":\"order_remark\"}},[_c('el-input',{attrs:{\"type\":\"textarea\"},model:{value:(_vm.orderForm.order_remark),callback:function ($$v) {_vm.$set(_vm.orderForm, \"order_remark\", $$v)},expression:\"orderForm.order_remark\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submitForm}},[_vm._v(\"保存\")]),_c('el-button',{on:{\"click\":_vm.goBack}},[_vm._v(\"取消\")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"purchase-order-form-container\">\n    <h2>{{ isEditMode ? '编辑采购订单' : '新增采购订单' }}</h2>\n    <el-form :model=\"orderForm\" ref=\"orderFormRef\" label-width=\"100px\">\n      <el-form-item label=\"订单编号\" prop=\"order_no\">\n        <el-input v-model=\"orderForm.order_no\" :disabled=\"isEditMode\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"供应商\" prop=\"supplier_id\">\n        <!-- TODO: Searchable select for suppliers -->\n        <el-select v-model=\"orderForm.supplier_id\" placeholder=\"选择供应商\">\n          <el-option label=\"供应商A\" value=\"1\"></el-option>\n          <el-option label=\"供应商B\" value=\"2\"></el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"订单日期\" prop=\"order_date\">\n        <el-date-picker v-model=\"orderForm.order_date\" type=\"date\" placeholder=\"选择日期\"></el-date-picker>\n      </el-form-item>\n      <el-form-item label=\"预计到货日\" prop=\"expected_date\">\n        <el-date-picker v-model=\"orderForm.expected_date\" type=\"date\" placeholder=\"选择日期\"></el-date-picker>\n      </el-form-item>\n      \n      <h3>订单明细 (配件)</h3>\n      <el-table :data=\"orderForm.items\" border style=\"margin-bottom:15px;\">\n        <el-table-column label=\"配件\">\n            <template slot-scope=\"scope\">\n                <!-- TODO: Searchable select for components -->\n                <el-select v-model=\"scope.row.component_id\" placeholder=\"选择配件\">\n                    <el-option label=\"示例配件X\" value=\"1\"></el-option>\n                    <el-option label=\"示例配件Y\" value=\"2\"></el-option>\n                </el-select>\n            </template>\n        </el-table-column>\n        <el-table-column label=\"数量\">\n            <template slot-scope=\"scope\">\n                <el-input-number v-model=\"scope.row.quantity\" :min=\"1\"></el-input-number>\n            </template>\n        </el-table-column>\n        <el-table-column label=\"单价\">\n            <template slot-scope=\"scope\">\n                <el-input-number v-model=\"scope.row.unit_price\" :min=\"0\" :precision=\"2\"></el-input-number>\n            </template>\n        </el-table-column>\n        <el-table-column label=\"金额\">\n            <template slot-scope=\"scope\">\n                {{ (scope.row.quantity * scope.row.unit_price) || 0 | toFixed(2) }}\n            </template>\n        </el-table-column>\n        <el-table-column label=\"操作\">\n            <template slot-scope=\"scope\">\n                <el-button size=\"mini\" type=\"danger\" @click=\"removeItem(scope.$index)\">移除</el-button>\n            </template>\n        </el-table-column>\n      </el-table>\n      <el-button @click=\"addItem\">添加配件</el-button>\n      \n      <el-form-item label=\"总金额\" style=\"margin-top:15px;\">\n          <el-input v-model=\"totalAmountDisplay\" readonly></el-input>\n      </el-form-item>\n\n      <el-form-item label=\"备注\" prop=\"order_remark\">\n        <el-input type=\"textarea\" v-model=\"orderForm.order_remark\"></el-input>\n      </el-form-item>\n      <el-form-item>\n        <el-button type=\"primary\" @click=\"submitForm\">保存</el-button>\n        <el-button @click=\"goBack\">取消</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'PurchaseOrderForm',\n  data() {\n    return {\n      isEditMode: false,\n      orderForm: {\n        order_no: '',\n        supplier_id: null,\n        order_date: new Date(),\n        expected_date: null,\n        order_status: 0, // Draft by default\n        total_amount: 0,\n        order_remark: '',\n        items: []\n      }\n    };\n  },\n  computed: {\n    totalAmountDisplay() {\n      return this.orderForm.items.reduce((sum, item) => sum + (item.quantity * item.unit_price || 0), 0).toFixed(2);\n    }\n  },\n  created() {\n    const orderId = this.$route.params.id;\n    if (orderId && orderId !== 'new') {\n      this.isEditMode = true;\n      this.fetchOrderDetails(orderId);\n    } else {\n        this.addItem(); \n    }\n  },\n  methods: {\n    fetchOrderDetails(orderId) {\n      // TODO: API call\n      console.log('Fetching purchase order:', orderId);\n      this.orderForm = {\n        purchase_order_id: orderId,\n        order_no: 'PO2023001',\n        supplier_id: '1',\n        order_date: '2023-01-05',\n        expected_date: '2023-01-20',\n        order_status: 1,\n        total_amount: 2000,\n        order_remark: '常规采购',\n        items: [\n          { order_item_id: 1, component_id: '1', quantity: 200, unit_price: 10 },\n        ]\n      };\n    },\n    addItem() {\n      this.orderForm.items.push({ component_id: null, quantity: 1, unit_price: 0 });\n    },\n    removeItem(index) {\n      this.orderForm.items.splice(index, 1);\n    },\n    submitForm() {\n      // TODO: Validate and API call\n      this.orderForm.total_amount = parseFloat(this.totalAmountDisplay);\n      console.log('Submitting purchase order:', this.orderForm);\n      this.$message.success('采购订单保存成功!');\n      this.goBack();\n    },\n    goBack() {\n      this.$router.push({ name: 'PurchaseOrderList' });\n    }\n  },\n  filters: {\n      toFixed(value, count) {\n          if (isNaN(parseFloat(value))) return '0.00';\n          return parseFloat(value).toFixed(count || 2);\n      }\n  }\n};\n</script>\n\n<style scoped>\n.purchase-order-form-container {\n  padding: 20px;\n}\n</style> ","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PurchaseOrderForm.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PurchaseOrderForm.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./PurchaseOrderForm.vue?vue&type=template&id=e3af41ca&scoped=true\"\nimport script from \"./PurchaseOrderForm.vue?vue&type=script&lang=js\"\nexport * from \"./PurchaseOrderForm.vue?vue&type=script&lang=js\"\nimport style0 from \"./PurchaseOrderForm.vue?vue&type=style&index=0&id=e3af41ca&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e3af41ca\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","_v","_s","isEditMode","ref","attrs","orderForm","model","value","order_no","callback","$$v","$set","expression","supplier_id","order_date","expected_date","staticStyle","items","scopedSlots","_u","key","fn","scope","row","component_id","quantity","unit_price","_f","on","$event","removeItem","$index","addItem","totalAmountDisplay","order_remark","submitForm","goBack","staticRenderFns","name","data","Date","order_status","total_amount","computed","reduce","sum","item","toFixed","created","orderId","$route","params","id","fetchOrderDetails","methods","console","log","purchase_order_id","order_item_id","push","index","splice","parseFloat","$message","success","$router","filters","count","isNaN","component"],"sourceRoot":""}