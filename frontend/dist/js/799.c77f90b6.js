"use strict";(self["webpackChunkxianglong_erp_frontend"]=self["webpackChunkxianglong_erp_frontend"]||[]).push([[799],{6799:(e,t,o)=>{o.r(t),o.d(t,{default:()=>n});var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"bom-form-container"},[t("h2",[e._v(e._s(e.isEditMode?"编辑BOM":e.isViewMode?"查看BOM":"新增BOM"))]),t("el-form",{ref:"bomFormRef",attrs:{model:e.bomForm,"label-width":"120px",disabled:e.isViewMode}},[t("el-form-item",{attrs:{label:"成品",prop:"product_id"}},[t("el-select",{attrs:{placeholder:"请选择成品"},model:{value:e.bomForm.product_id,callback:function(t){e.$set(e.bomForm,"product_id",t)},expression:"bomForm.product_id"}},[t("el-option",{attrs:{label:"示例产品A (P001)",value:"1"}}),t("el-option",{attrs:{label:"示例产品B (P002)",value:"2"}})],1)],1),t("el-form-item",{attrs:{label:"BOM版本",prop:"bom_version"}},[t("el-input",{attrs:{placeholder:"例如：V1.0"},model:{value:e.bomForm.bom_version,callback:function(t){e.$set(e.bomForm,"bom_version",t)},expression:"bomForm.bom_version"}})],1),t("el-form-item",{attrs:{label:"状态",prop:"bom_status"}},[t("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-text":"启用","inactive-text":"禁用"},model:{value:e.bomForm.bom_status,callback:function(t){e.$set(e.bomForm,"bom_status",t)},expression:"bomForm.bom_status"}})],1),t("el-form-item",{attrs:{label:"备注",prop:"bom_remark"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.bomForm.bom_remark,callback:function(t){e.$set(e.bomForm,"bom_remark",t)},expression:"bomForm.bom_remark"}})],1),t("h3",[e._v("BOM明细")]),t("el-table",{staticStyle:{"margin-bottom":"20px"},attrs:{data:e.bomForm.details,border:""}},[t("el-table-column",{attrs:{label:"配件编码"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("el-select",{attrs:{placeholder:"选择配件",disabled:e.isViewMode},model:{value:o.row.component_id,callback:function(t){e.$set(o.row,"component_id",t)},expression:"scope.row.component_id"}},[t("el-option",{attrs:{label:"示例配件X (C001)",value:"1"}}),t("el-option",{attrs:{label:"示例配件Y (C002)",value:"2"}})],1)]}}])}),t("el-table-column",{attrs:{label:"用量"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("el-input-number",{attrs:{min:.001,precision:3,disabled:e.isViewMode},model:{value:o.row.quantity,callback:function(t){e.$set(o.row,"quantity",t)},expression:"scope.row.quantity"}})]}}])}),t("el-table-column",{attrs:{label:"备注"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("el-input",{attrs:{disabled:e.isViewMode},model:{value:o.row.bom_detail_remark,callback:function(t){e.$set(o.row,"bom_detail_remark",t)},expression:"scope.row.bom_detail_remark"}})]}}])}),e.isViewMode?e._e():t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.removeDetailItem(o.$index)}}},[e._v("移除")])]}}],null,!1,3073930826)})],1),e.isViewMode?e._e():t("el-button",{attrs:{type:"primary"},on:{click:e.addDetailItem}},[e._v("添加明细项")]),e.isViewMode?e._e():t("el-form-item",{staticStyle:{"margin-top":"20px"}},[t("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("保存")]),t("el-button",{on:{click:e.goBack}},[e._v("取消")])],1),e.isViewMode?t("el-form-item",{staticStyle:{"margin-top":"20px"}},[t("el-button",{on:{click:e.goBack}},[e._v("返回")])],1):e._e()],1)],1)},a=[];const r={name:"BomForm",data(){return{isEditMode:!1,isViewMode:!1,bomForm:{product_id:null,bom_version:"",bom_status:1,bom_remark:"",details:[]}}},created(){const e=this.$route.params.id;this.isViewMode="true"===this.$route.query.view,e&&"new"!==e?(this.isEditMode=!0,this.fetchBomDetails(e)):(this.isEditMode=!1,this.isViewMode||this.addDetailItem())},methods:{fetchBomDetails(e){console.log("Fetch BOM details for:",e),this.bomForm={bom_id:e,product_id:"1",bom_version:"V1.0",bom_status:1,bom_remark:"这是一个示例BOM",details:[{bom_detail_id:1,component_id:"1",quantity:2,bom_detail_remark:"主要部件"},{bom_detail_id:2,component_id:"2",quantity:5,bom_detail_remark:"辅助材料"}]}},addDetailItem(){this.bomForm.details.push({component_id:null,quantity:1,bom_detail_remark:""})},removeDetailItem(e){this.bomForm.details.splice(e,1)},submitForm(){this.$refs.bomFormRef.validate((e=>{if(!e)return this.$message.error("请检查表单输入!"),!1;console.log("Submitting BOM:",this.bomForm),this.$message.success("BOM保存成功!"),this.goBack()}))},goBack(){this.$router.push({name:"BomList"})}}},l=r;var s=o(1656),m=(0,s.A)(l,i,a,!1,null,"1d13a7be",null);const n=m.exports}}]);
//# sourceMappingURL=799.c77f90b6.js.map