(()=>{"use strict";var e={7285:(e,t,n)=>{var r=n(5471),a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("el-container",[t("el-aside",{attrs:{width:"220px"}},[t("div",{staticClass:"logo"},[e._e(),t("h2",[e._v("翔珑科技ERP")])]),t("el-menu",{staticClass:"el-menu-vertical",attrs:{"default-active":e.activeMenu,"background-color":"#304156","text-color":"#bfcbd9","active-text-color":"#409EFF",router:""}},[t("el-menu-item",{attrs:{index:"/"}},[t("i",{staticClass:"el-icon-s-home"}),t("span",[e._v("首页")])]),t("el-submenu",{attrs:{index:"1"}},[t("template",{slot:"title"},[t("i",{staticClass:"el-icon-s-goods"}),t("span",[e._v("基础数据")])]),t("el-menu-item",{attrs:{index:"/products"}},[e._v("产品管理")]),t("el-menu-item",{attrs:{index:"/components"}},[e._v("配件管理")]),t("el-menu-item",{attrs:{index:"/bom"}},[e._v("BOM管理")]),t("el-menu-item",{attrs:{index:"/customers"}},[e._v("客户管理")]),t("el-menu-item",{attrs:{index:"/suppliers"}},[e._v("供应商管理")])],2),t("el-submenu",{attrs:{index:"2"}},[t("template",{slot:"title"},[t("i",{staticClass:"el-icon-s-order"}),t("span",[e._v("订单管理")])]),t("el-menu-item",{attrs:{index:"/sales-orders"}},[e._v("销售订单")]),t("el-menu-item",{attrs:{index:"/purchase-orders"}},[e._v("采购订单")])],2),t("el-submenu",{attrs:{index:"3"}},[t("template",{slot:"title"},[t("i",{staticClass:"el-icon-s-management"}),t("span",[e._v("库存管理")])]),t("el-menu-item",{attrs:{index:"/inventory"}},[e._v("库存查询")]),t("el-menu-item",{attrs:{index:"/inventory/in-transit"}},[e._v("在途库存")]),t("el-menu-item",{attrs:{index:"/inventory/transactions"}},[e._v("库存事务")]),t("el-menu-item",{attrs:{index:"/inventory/stock-in"}},[e._v("入库管理")]),t("el-menu-item",{attrs:{index:"/inventory/stock-out"}},[e._v("出库管理")]),t("el-menu-item",{attrs:{index:"/inventory/adjustment"}},[e._v("库存调整")])],2),t("el-submenu",{attrs:{index:"4"}},[t("template",{slot:"title"},[t("i",{staticClass:"el-icon-money"}),t("span",[e._v("财务管理")])]),t("el-menu-item",{attrs:{index:"/finance/receivables"}},[e._v("应收账款")]),t("el-menu-item",{attrs:{index:"/finance/payables"}},[e._v("应付账款")]),t("el-menu-item",{attrs:{index:"/finance/invoices"}},[e._v("发票管理")])],2),t("el-menu-item",{attrs:{index:"/reports"}},[t("i",{staticClass:"el-icon-s-data"}),t("span",[e._v("报表中心")])]),t("el-menu-item",{attrs:{index:"/settings"}},[t("i",{staticClass:"el-icon-setting"}),t("span",[e._v("系统设置")])])],1)],1),t("el-container",[t("el-header",[t("div",{staticClass:"header-left"},[t("i",{staticClass:"el-icon-s-fold toggle-sidebar"}),t("breadcrumb")],1),t("div",{staticClass:"header-right"},[t("el-dropdown",{attrs:{trigger:"click"}},[t("span",{staticClass:"user-dropdown"},[e._v(" "+e._s(e.currentUser?e.currentUser.real_name||e.currentUser.username:"用户")+" "),t("i",{staticClass:"el-icon-arrow-down"})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",[e._v("个人信息")]),t("el-dropdown-item",[e._v("修改密码")]),t("el-dropdown-item",{attrs:{divided:""},nativeOn:{click:function(t){return e.logout.apply(null,arguments)}}},[e._v("退出登录")])],1)],1)],1)]),t("el-main",[t("router-view")],1),t("el-footer",[t("div",{staticClass:"footer-content"},[e._v(" © 2025 上海翔珑科技有限公司 - ERP系统 ")])])],1)],1)],1)},o=[],s=n(5353),i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"breadcrumb-container"},[t("el-breadcrumb",{attrs:{separator:"/"}},[t("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._l(e.pathItems,(function(n){return t("el-breadcrumb-item",{key:n.path,attrs:{to:n.path?{path:n.path}:null}},[e._v(" "+e._s(n.name)+" ")])}))],2)],1)},l=[];const d={name:"Breadcrumb",data(){return{pathItems:[]}},watch:{$route:{handler(e){this.generateBreadcrumbs(e)},immediate:!0}},methods:{generateBreadcrumbs(e){let t=e.matched.filter((e=>e.meta&&e.meta.title));const n=t[0];n&&n.name,this.pathItems=e.matched.filter((e=>e.meta&&e.meta.title)).map((e=>({name:e.meta.title,path:e.path}))),this.pathItems.length>0&&"首页"!==this.pathItems[0].name&&"/"!==e.path&&this.pathItems.unshift({name:"首页",path:"/"})}}},u=d;var c=n(1656),m=(0,c.A)(u,i,l,!1,null,"37a51d9f",null);const p=m.exports,h={name:"App",components:{Breadcrumb:p},computed:{...(0,s.L8)(["currentUser"]),activeMenu(){return this.$route.path}},methods:{...(0,s.i0)(["logout"]),handleLogout(){this.logout(),this.$router.push("/login")}}},v=h;var f=(0,c.A)(v,a,o,!1,null,"1684913e",null);const g=f.exports;var b=n(173),_=function(){var e=this,t=e._self._c;return t("div",{staticClass:"login-container"},[t("div",{staticClass:"login-form-container"},[e._m(0),t("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:e.loginForm,rules:e.loginRules}},[t("el-form-item",{attrs:{prop:"username"}},[t("el-input",{attrs:{"prefix-icon":"el-icon-user",placeholder:"用户名"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),t("el-form-item",{attrs:{prop:"password"}},[t("el-input",{attrs:{"prefix-icon":"el-icon-lock",type:"password",placeholder:"密码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin.apply(null,arguments)}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),t("el-form-item",[t("el-button",{staticClass:"login-button",attrs:{loading:e.loading,type:"primary"},on:{click:e.handleLogin}},[e._v(" 登录 ")])],1)],1)],1)])},y=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"login-header"},[t("h2",[e._v("翔珑科技ERP系统")]),t("p",[e._v("企业资源管理平台")])])}];const A={name:"Login",data(){return{loginForm:{username:"",password:""},loginRules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},computed:{...(0,s.aH)(["loading"])},methods:{...(0,s.i0)(["login"]),handleLogin(){this.$refs.loginForm.validate((async e=>{if(!e)return!1;try{const e=await this.login(this.loginForm);console.log("Login action response in component:",e),console.log("Token in Vuex after login action:",this.$store.state.token),console.log("User in Vuex after login action:",this.$store.state.user),this.$store.state.token?(this.$router.push("/"),this.$message.success("登录成功")):(this.$message.error("登录似乎成功，但未能获取到Token，请检查控制台。"),console.error("Token is still missing in Vuex state after login action."))}catch(t){console.error("登录流程失败:",t);const e=t.response?.data?.message||t.message||"未知登录错误";this.$message.error("登录失败: "+e)}}))}}},k=A;var x=(0,c.A)(k,_,y,!1,null,"d0ca4e08",null);const w=x.exports;var C=function(){var e=this,t=e._self._c;return t("div",{staticClass:"dashboard-container"},[t("h1",[e._v("欢迎来到翔珑ERP系统")]),t("p",[e._v("这里是您的系统仪表盘，将展示关键指标和快速入口。")]),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("el-card",{attrs:{shadow:"hover"}},[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",[e._v("销售订单")])]),t("div",[e._v("今日新增: XX")]),t("div",[e._v("待处理: XX")])])],1),t("el-col",{attrs:{span:8}},[t("el-card",{attrs:{shadow:"hover"}},[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",[e._v("采购订单")])]),t("div",[e._v("今日新增: XX")]),t("div",[e._v("待收货: XX")])])],1),t("el-col",{attrs:{span:8}},[t("el-card",{attrs:{shadow:"hover"}},[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",[e._v("库存预警")])]),t("div",[e._v("低库存配件: XX")]),t("div",[e._v("积压产品: XX")])])],1)],1)],1)},O=[];const S={name:"Dashboard",data(){return{}},created(){}},E=S;var q=(0,c.A)(E,C,O,!1,null,"45d55e16",null);const T=q.exports;var I=n(4335);r["default"].use(s.Ay);const L=new s.Ay.Store({state:{token:localStorage.getItem("token")||"",user:JSON.parse(localStorage.getItem("user"))||null,loading:!1},getters:{isAuthenticated:e=>!!e.token,currentUser:e=>e.user},mutations:{SET_TOKEN(e,t){e.token=t},SET_USER(e,t){e.user=t},SET_LOADING(e,t){e.loading=t},CLEAR_AUTH(e){e.token="",e.user=null}},actions:{async login({commit:e},t){e("SET_LOADING",!0);try{const n=await I.A.post("/auth/login",t),{token:r,user:a}=n.data.data;return localStorage.setItem("token",r),localStorage.setItem("user",JSON.stringify(a)),e("SET_TOKEN",r),e("SET_USER",a),n}finally{e("SET_LOADING",!1)}},logout({commit:e}){localStorage.removeItem("token"),localStorage.removeItem("user"),e("CLEAR_AUTH")},async fetchUserInfo({commit:e}){e("SET_LOADING",!0);try{const t=await I.A.get("/auth/me"),n=t.data.data;return localStorage.setItem("user",JSON.stringify(n)),e("SET_USER",n),n}finally{e("SET_LOADING",!1)}}}});r["default"].use(b.Ay);const N=[{path:"/login",name:"Login",component:w,meta:{requiresAuth:!1}},{path:"/",name:"Dashboard",component:T,meta:{requiresAuth:!0}},{path:"/products",name:"Products",component:()=>n.e(316).then(n.bind(n,1316)),meta:{requiresAuth:!0}},{path:"/components",name:"Components",component:()=>n.e(722).then(n.bind(n,1722)),meta:{requiresAuth:!0}},{path:"/bom",name:"BOM",component:()=>n.e(805).then(n.bind(n,4805)),meta:{requiresAuth:!0}},{path:"/bom/create",name:"CreateBOM",component:()=>n.e(799).then(n.bind(n,6799)),meta:{requiresAuth:!0}},{path:"/bom/edit/:id",name:"EditBOM",component:()=>n.e(799).then(n.bind(n,6799)),meta:{requiresAuth:!0}},{path:"/sales-orders",name:"SalesOrders",component:()=>n.e(877).then(n.bind(n,7877)),meta:{requiresAuth:!0}},{path:"/sales-orders/create",name:"CreateSalesOrder",component:()=>n.e(593).then(n.bind(n,9593)),meta:{requiresAuth:!0}},{path:"/sales-orders/:id",name:"SalesOrderDetail",component:()=>n.e(945).then(n.bind(n,8326)),meta:{requiresAuth:!0}},{path:"/purchase-orders",name:"PurchaseOrders",component:()=>n.e(176).then(n.bind(n,2176)),meta:{requiresAuth:!0}},{path:"/purchase-orders/create",name:"CreatePurchaseOrder",component:()=>n.e(291).then(n.bind(n,5291)),meta:{requiresAuth:!0}},{path:"/purchase-orders/:id",name:"PurchaseOrderDetail",component:()=>n.e(832).then(n.bind(n,5832)),meta:{requiresAuth:!0}},{path:"/inventory",name:"Inventory",component:()=>n.e(776).then(n.bind(n,776)),meta:{requiresAuth:!0}},{path:"/inventory/transactions",name:"InventoryTransactions",component:()=>n.e(70).then(n.bind(n,9070)),meta:{requiresAuth:!0}},{path:"/inventory/in-transit",name:"InTransitInventory",component:()=>n.e(206).then(n.bind(n,206)),meta:{requiresAuth:!0}},{path:"/inventory/stock-in",name:"StockIn",component:()=>n.e(318).then(n.bind(n,8318)),meta:{requiresAuth:!0}},{path:"/inventory/stock-out",name:"StockOut",component:()=>n.e(335).then(n.bind(n,9335)),meta:{requiresAuth:!0}},{path:"/inventory/adjustment",name:"InventoryAdjustment",component:()=>n.e(963).then(n.bind(n,3963)),meta:{requiresAuth:!0}},{path:"/finance/receivables",name:"AccountsReceivable",component:()=>n.e(607).then(n.bind(n,6607)),meta:{requiresAuth:!0}},{path:"/finance/payables",name:"AccountsPayable",component:()=>n.e(282).then(n.bind(n,1282)),meta:{requiresAuth:!0}},{path:"/finance/invoices",name:"Invoices",component:()=>n.e(133).then(n.bind(n,8133)),meta:{requiresAuth:!0}},{path:"/reports",name:"Reports",component:()=>n.e(347).then(n.bind(n,1347)),meta:{requiresAuth:!0}},{path:"/settings",name:"Settings",component:()=>n.e(438).then(n.bind(n,3438)),meta:{requiresAuth:!0}}],$=new b.Ay({mode:"history",base:"/",routes:N});$.beforeEach(((e,t,n)=>{const r=e.matched.some((e=>e.meta.requiresAuth)),a=L.state.token;r&&!a?n("/login"):"/login"===e.path&&a?n("/"):n()}));const F=$;var P=n(1052),j=n.n(P);r["default"].config.productionTip=!1,r["default"].use(j()),I.A.defaults.baseURL="http://localhost:3000/api",I.A.interceptors.request.use((e=>{const t=L.state.token;return t&&(e.headers.Authorization=`Bearer ${t}`),e})),I.A.interceptors.response.use((e=>e),(e=>{if(e.response){401===e.response.status&&(L.dispatch("logout"),F.push("/login"));const t=e.response.data.message||"请求失败";r["default"].prototype.$message.error(t)}else r["default"].prototype.$message.error("网络错误，请检查您的连接");return Promise.reject(e)})),r["default"].prototype.$http=I.A,new r["default"]({router:F,store:L,render:e=>e(g)}).$mount("#app")}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r](o,o.exports,n),o.loaded=!0,o.exports}n.m=e,(()=>{n.amdO={}})(),(()=>{var e=[];n.O=(t,r,a,o)=>{if(!r){var s=1/0;for(u=0;u<e.length;u++){for(var[r,a,o]=e[u],i=!0,l=0;l<r.length;l++)(!1&o||s>=o)&&Object.keys(n.O).every((e=>n.O[e](r[l])))?r.splice(l--,1):(i=!1,o<s&&(s=o));if(i){e.splice(u--,1);var d=a();void 0!==d&&(t=d)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[r,a,o]}})(),(()=>{n.n=e=>{var t=e&&e.__esModule?()=>e["default"]:()=>e;return n.d(t,{a:t}),t}})(),(()=>{n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}})(),(()=>{n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[]))})(),(()=>{n.u=e=>"js/"+e+"."+{70:"a1cd5e15",133:"c1f691b6",176:"ac9e0f3f",206:"2fb58b9a",282:"52276547",291:"51065a3e",316:"47e7dd79",318:"7adf29e7",335:"d9604b05",347:"e887fb63",438:"2dae9cc1",593:"d2f57aab",607:"668df5e9",722:"46b3b442",776:"652bafa1",799:"c77f90b6",805:"81201df9",832:"385365ec",877:"a8fbc168",945:"37cfd2c7",963:"8ef5b379"}[e]+".js"})(),(()=>{n.miniCssF=e=>"css/"+e+"."+{70:"63b13022",133:"f47fcfc4",176:"be5e9eaf",206:"8b55bd82",282:"61c9dd13",291:"01e0d3fa",316:"29e8d766",318:"0802d794",335:"95373597",347:"13cda2a2",438:"c1b5973a",593:"1358633a",607:"82a81811",722:"47a5f828",776:"15dab365",799:"ae7311b9",805:"a7b289ce",832:"8a75d9d5",877:"9887001f",945:"bf1b57ef",963:"04a893ba"}[e]+".css"})(),(()=>{n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{var e={},t="xianglong-erp-frontend:";n.l=(r,a,o,s)=>{if(e[r])e[r].push(a);else{var i,l;if(void 0!==o)for(var d=document.getElementsByTagName("script"),u=0;u<d.length;u++){var c=d[u];if(c.getAttribute("src")==r||c.getAttribute("data-webpack")==t+o){i=c;break}}i||(l=!0,i=document.createElement("script"),i.charset="utf-8",i.timeout=120,n.nc&&i.setAttribute("nonce",n.nc),i.setAttribute("data-webpack",t+o),i.src=r),e[r]=[a];var m=(t,n)=>{i.onerror=i.onload=null,clearTimeout(p);var a=e[r];if(delete e[r],i.parentNode&&i.parentNode.removeChild(i),a&&a.forEach((e=>e(n))),t)return t(n)},p=setTimeout(m.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=m.bind(null,i.onerror),i.onload=m.bind(null,i.onload),l&&document.head.appendChild(i)}}})(),(()=>{n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e)})(),(()=>{n.p="/"})(),(()=>{if("undefined"!==typeof document){var e=(e,t,r,a,o)=>{var s=document.createElement("link");s.rel="stylesheet",s.type="text/css",n.nc&&(s.nonce=n.nc);var i=n=>{if(s.onerror=s.onload=null,"load"===n.type)a();else{var r=n&&n.type,i=n&&n.target&&n.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+r+": "+i+")");l.name="ChunkLoadError",l.code="CSS_CHUNK_LOAD_FAILED",l.type=r,l.request=i,s.parentNode&&s.parentNode.removeChild(s),o(l)}};return s.onerror=s.onload=i,s.href=t,r?r.parentNode.insertBefore(s,r.nextSibling):document.head.appendChild(s),s},t=(e,t)=>{for(var n=document.getElementsByTagName("link"),r=0;r<n.length;r++){var a=n[r],o=a.getAttribute("data-href")||a.getAttribute("href");if("stylesheet"===a.rel&&(o===e||o===t))return a}var s=document.getElementsByTagName("style");for(r=0;r<s.length;r++){a=s[r],o=a.getAttribute("data-href");if(o===e||o===t)return a}},r=r=>new Promise(((a,o)=>{var s=n.miniCssF(r),i=n.p+s;if(t(s,i))return a();e(r,i,null,a,o)})),a={524:0};n.f.miniCss=(e,t)=>{var n={70:1,133:1,176:1,206:1,282:1,291:1,316:1,318:1,335:1,347:1,438:1,593:1,607:1,722:1,776:1,799:1,805:1,832:1,877:1,945:1,963:1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=r(e).then((()=>{a[e]=0}),(t=>{throw delete a[e],t})))}}})(),(()=>{var e={524:0};n.f.j=(t,r)=>{var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)r.push(a[2]);else{var o=new Promise(((n,r)=>a=e[t]=[n,r]));r.push(a[2]=o);var s=n.p+n.u(t),i=new Error,l=r=>{if(n.o(e,t)&&(a=e[t],0!==a&&(e[t]=void 0),a)){var o=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.src;i.message="Loading chunk "+t+" failed.\n("+o+": "+s+")",i.name="ChunkLoadError",i.type=o,i.request=s,a[1](i)}};n.l(s,l,"chunk-"+t,t)}},n.O.j=t=>0===e[t];var t=(t,r)=>{var a,o,[s,i,l]=r,d=0;if(s.some((t=>0!==e[t]))){for(a in i)n.o(i,a)&&(n.m[a]=i[a]);if(l)var u=l(n)}for(t&&t(r);d<s.length;d++)o=s[d],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(u)},r=self["webpackChunkxianglong_erp_frontend"]=self["webpackChunkxianglong_erp_frontend"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r=n.O(void 0,[504],(()=>n(7285)));r=n.O(r)})();
//# sourceMappingURL=app.c4292a7e.js.map