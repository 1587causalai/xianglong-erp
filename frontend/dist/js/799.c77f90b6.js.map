{"version":3,"file":"js/799.c77f90b6.js","mappings":"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","sources":["webpack://xianglong-erp-frontend/./src/views/bom/BomForm.vue","webpack://xianglong-erp-frontend/src/views/bom/BomForm.vue","webpack://xianglong-erp-frontend/./src/views/bom/BomForm.vue?19fe","webpack://xianglong-erp-frontend/./src/views/bom/BomForm.vue?d3f1"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"bom-form-container\"},[_c('h2',[_vm._v(_vm._s(_vm.isEditMode ? '编辑BOM' : (_vm.isViewMode ? '查看BOM' : '新增BOM')))]),_c('el-form',{ref:\"bomFormRef\",attrs:{\"model\":_vm.bomForm,\"label-width\":\"120px\",\"disabled\":_vm.isViewMode}},[_c('el-form-item',{attrs:{\"label\":\"成品\",\"prop\":\"product_id\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择成品\"},model:{value:(_vm.bomForm.product_id),callback:function ($$v) {_vm.$set(_vm.bomForm, \"product_id\", $$v)},expression:\"bomForm.product_id\"}},[_c('el-option',{attrs:{\"label\":\"示例产品A (P001)\",\"value\":\"1\"}}),_c('el-option',{attrs:{\"label\":\"示例产品B (P002)\",\"value\":\"2\"}})],1)],1),_c('el-form-item',{attrs:{\"label\":\"BOM版本\",\"prop\":\"bom_version\"}},[_c('el-input',{attrs:{\"placeholder\":\"例如：V1.0\"},model:{value:(_vm.bomForm.bom_version),callback:function ($$v) {_vm.$set(_vm.bomForm, \"bom_version\", $$v)},expression:\"bomForm.bom_version\"}})],1),_c('el-form-item',{attrs:{\"label\":\"状态\",\"prop\":\"bom_status\"}},[_c('el-switch',{attrs:{\"active-value\":1,\"inactive-value\":0,\"active-text\":\"启用\",\"inactive-text\":\"禁用\"},model:{value:(_vm.bomForm.bom_status),callback:function ($$v) {_vm.$set(_vm.bomForm, \"bom_status\", $$v)},expression:\"bomForm.bom_status\"}})],1),_c('el-form-item',{attrs:{\"label\":\"备注\",\"prop\":\"bom_remark\"}},[_c('el-input',{attrs:{\"type\":\"textarea\"},model:{value:(_vm.bomForm.bom_remark),callback:function ($$v) {_vm.$set(_vm.bomForm, \"bom_remark\", $$v)},expression:\"bomForm.bom_remark\"}})],1),_c('h3',[_vm._v(\"BOM明细\")]),_c('el-table',{staticStyle:{\"margin-bottom\":\"20px\"},attrs:{\"data\":_vm.bomForm.details,\"border\":\"\"}},[_c('el-table-column',{attrs:{\"label\":\"配件编码\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-select',{attrs:{\"placeholder\":\"选择配件\",\"disabled\":_vm.isViewMode},model:{value:(scope.row.component_id),callback:function ($$v) {_vm.$set(scope.row, \"component_id\", $$v)},expression:\"scope.row.component_id\"}},[_c('el-option',{attrs:{\"label\":\"示例配件X (C001)\",\"value\":\"1\"}}),_c('el-option',{attrs:{\"label\":\"示例配件Y (C002)\",\"value\":\"2\"}})],1)]}}])}),_c('el-table-column',{attrs:{\"label\":\"用量\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-input-number',{attrs:{\"min\":0.001,\"precision\":3,\"disabled\":_vm.isViewMode},model:{value:(scope.row.quantity),callback:function ($$v) {_vm.$set(scope.row, \"quantity\", $$v)},expression:\"scope.row.quantity\"}})]}}])}),_c('el-table-column',{attrs:{\"label\":\"备注\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-input',{attrs:{\"disabled\":_vm.isViewMode},model:{value:(scope.row.bom_detail_remark),callback:function ($$v) {_vm.$set(scope.row, \"bom_detail_remark\", $$v)},expression:\"scope.row.bom_detail_remark\"}})]}}])}),(!_vm.isViewMode)?_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"danger\"},on:{\"click\":function($event){return _vm.removeDetailItem(scope.$index)}}},[_vm._v(\"移除\")])]}}],null,false,3073930826)}):_vm._e()],1),(!_vm.isViewMode)?_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addDetailItem}},[_vm._v(\"添加明细项\")]):_vm._e(),(!_vm.isViewMode)?_c('el-form-item',{staticStyle:{\"margin-top\":\"20px\"}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submitForm}},[_vm._v(\"保存\")]),_c('el-button',{on:{\"click\":_vm.goBack}},[_vm._v(\"取消\")])],1):_vm._e(),(_vm.isViewMode)?_c('el-form-item',{staticStyle:{\"margin-top\":\"20px\"}},[_c('el-button',{on:{\"click\":_vm.goBack}},[_vm._v(\"返回\")])],1):_vm._e()],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"bom-form-container\">\n    <h2>{{ isEditMode ? '编辑BOM' : (isViewMode ? '查看BOM' : '新增BOM') }}</h2>\n    <el-form :model=\"bomForm\" ref=\"bomFormRef\" label-width=\"120px\" :disabled=\"isViewMode\">\n      <el-form-item label=\"成品\" prop=\"product_id\">\n        <!-- TODO: Use a searchable select for products -->\n        <el-select v-model=\"bomForm.product_id\" placeholder=\"请选择成品\">\n          <el-option label=\"示例产品A (P001)\" value=\"1\"></el-option>\n          <el-option label=\"示例产品B (P002)\" value=\"2\"></el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"BOM版本\" prop=\"bom_version\">\n        <el-input v-model=\"bomForm.bom_version\" placeholder=\"例如：V1.0\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"状态\" prop=\"bom_status\">\n        <el-switch v-model=\"bomForm.bom_status\" :active-value=\"1\" :inactive-value=\"0\" active-text=\"启用\" inactive-text=\"禁用\"></el-switch>\n      </el-form-item>\n      <el-form-item label=\"备注\" prop=\"bom_remark\">\n        <el-input type=\"textarea\" v-model=\"bomForm.bom_remark\"></el-input>\n      </el-form-item>\n\n      <h3>BOM明细</h3>\n      <el-table :data=\"bomForm.details\" border style=\"margin-bottom: 20px;\">\n        <el-table-column label=\"配件编码\">\n          <template slot-scope=\"scope\">\n            <!-- TODO: Searchable select for components -->\n            <el-select v-model=\"scope.row.component_id\" placeholder=\"选择配件\" :disabled=\"isViewMode\">\n               <el-option label=\"示例配件X (C001)\" value=\"1\"></el-option>\n               <el-option label=\"示例配件Y (C002)\" value=\"2\"></el-option>\n            </el-select>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"用量\">\n          <template slot-scope=\"scope\">\n            <el-input-number v-model=\"scope.row.quantity\" :min=\"0.001\" :precision=\"3\" :disabled=\"isViewMode\"></el-input-number>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"备注\">\n          <template slot-scope=\"scope\">\n            <el-input v-model=\"scope.row.bom_detail_remark\" :disabled=\"isViewMode\"></el-input>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"操作\" v-if=\"!isViewMode\">\n          <template slot-scope=\"scope\">\n            <el-button size=\"mini\" type=\"danger\" @click=\"removeDetailItem(scope.$index)\">移除</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n      <el-button type=\"primary\" @click=\"addDetailItem\" v-if=\"!isViewMode\">添加明细项</el-button>\n\n      <el-form-item style=\"margin-top: 20px;\" v-if=\"!isViewMode\">\n        <el-button type=\"primary\" @click=\"submitForm\">保存</el-button>\n        <el-button @click=\"goBack\">取消</el-button>\n      </el-form-item>\n      <el-form-item style=\"margin-top: 20px;\" v-if=\"isViewMode\">\n        <el-button @click=\"goBack\">返回</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\n// TODO: Import API service for BOMs, products, components\nexport default {\n  name: 'BomForm',\n  data() {\n    return {\n      isEditMode: false,\n      isViewMode: false,\n      bomForm: {\n        product_id: null,\n        bom_version: '',\n        bom_status: 1,\n        bom_remark: '',\n        details: []\n      },\n      // TODO: rules for validation\n    };\n  },\n  created() {\n    const bomId = this.$route.params.id;\n    this.isViewMode = this.$route.query.view === 'true';\n    if (bomId && bomId !== 'new') {\n      this.isEditMode = true;\n      this.fetchBomDetails(bomId);\n    } else {\n      this.isEditMode = false;\n      // Add a default empty item for new BOM\n      if (!this.isViewMode) this.addDetailItem(); \n    }\n  },\n  methods: {\n    fetchBomDetails(bomId) {\n      // TODO: Call API to get BOM details by bomId\n      console.log('Fetch BOM details for:', bomId);\n      // Example data structure:\n      this.bomForm = {\n        bom_id: bomId,\n        product_id: '1', // Example product ID\n        bom_version: 'V1.0',\n        bom_status: 1,\n        bom_remark: '这是一个示例BOM',\n        details: [\n          { bom_detail_id: 1, component_id: '1', quantity: 2, bom_detail_remark: '主要部件' },\n          { bom_detail_id: 2, component_id: '2', quantity: 5, bom_detail_remark: '辅助材料' },\n        ]\n      };\n    },\n    addDetailItem() {\n      this.bomForm.details.push({\n        component_id: null,\n        quantity: 1,\n        bom_detail_remark: ''\n        // temp_id for local key if needed before saving: Date.now()\n      });\n    },\n    removeDetailItem(index) {\n      this.bomForm.details.splice(index, 1);\n    },\n    submitForm() {\n      this.$refs.bomFormRef.validate(valid => {\n        if (valid) {\n          // TODO: Call API to save/update BOM\n          console.log('Submitting BOM:', this.bomForm);\n          this.$message.success('BOM保存成功!');\n          this.goBack();\n        } else {\n          this.$message.error('请检查表单输入!');\n          return false;\n        }\n      });\n    },\n    goBack() {\n      this.$router.push({ name: 'BomList' }); // Assuming your list route is named BomList\n    }\n  }\n};\n</script>\n\n<style scoped>\n.bom-form-container {\n  padding: 20px;\n}\n</style> ","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./BomForm.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./BomForm.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./BomForm.vue?vue&type=template&id=1d13a7be&scoped=true\"\nimport script from \"./BomForm.vue?vue&type=script&lang=js\"\nexport * from \"./BomForm.vue?vue&type=script&lang=js\"\nimport style0 from \"./BomForm.vue?vue&type=style&index=0&id=1d13a7be&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1d13a7be\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","_v","_s","isEditMode","isViewMode","ref","attrs","bomForm","model","value","product_id","callback","$$v","$set","expression","bom_version","bom_status","bom_remark","staticStyle","details","scopedSlots","_u","key","fn","scope","row","component_id","quantity","bom_detail_remark","_e","on","$event","removeDetailItem","$index","addDetailItem","submitForm","goBack","staticRenderFns","name","data","created","bomId","$route","params","id","query","view","fetchBomDetails","methods","console","log","bom_id","bom_detail_id","push","index","splice","$refs","bomFormRef","validate","valid","$message","error","success","$router","component"],"sourceRoot":""}